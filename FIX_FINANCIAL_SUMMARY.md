# ๐ง ุฅุตูุงุญ: ุงูููุฎุต ุงููุงูู ูุนุฑุถ ูุจุงูุบ ุตูุฑูุฉ

**ุงูุชุงุฑูุฎ:** 25 ุฃูุชูุจุฑ 2025  
**ุงููุดููุฉ:** ุงูููุฎุต ุงููุงูู ูู ุงูุดุงุดุฉ ุงูุฑุฆูุณูุฉ ูุนุฑุถ ููููุง ุตูุฑูุฉ ุฃู ูุง ูุนุฑุถ ุฃู ูุจุงูุบ

---

## ๐ ุงูุณุจุจ

ุงููุธุงู ูุญุชุณุจ **ุงูุฏุฎู ุงููููู** ุจูุงุกู ุนูู ูุนุงุฏูุฉ:

```
ุฅุฌูุงูู ุงูุฏุฎู = (ุฑุตูุฏ ููุงูุฉ ุงูููู - ุฑุตูุฏ ุจุฏุงูุฉ ุงูููู) + ูุตุฑููุงุช ุงูุฏุฑุฌ + ุงูุฏุฎู ุงููุฏูู
```

**ุฅุฐุง ูู ููู ูุฏูู ุฑุตูุฏ ุจุฏุงูุฉ/ููุงูุฉ ุงูููู ูุณุฌู:**
- โ ุงูุฑุตูุฏ ุงูููุฏู ุงูุฅุฌูุงูู = ูุนูู (ูุญููุธ ูู ุงูุฅุนุฏุงุฏุงุช)
- โ ุงูุฏุฎู ุงููููู = 0 (ูุง ุชูุฌุฏ ุจูุงูุงุช ุฏุฑุฌ)
- โ ุตุงูู ุงูุฑุจุญ = 0

---

## โ ุงูุญู

### ุงูุฎุทูุฉ 1: ุชุณุฌูู ุฑุตูุฏ ุจุฏุงูุฉ ุงูููู
1. ุงุฐูุจ ุฅูู **ุงููุตุฑููุงุช** (ูู ุงูุดุฑูุท ุงูุณููู)
2. ุงุถุบุท ุนูู ุชุจููุจ **"ุงูุฏุฑุฌ"**
3. ุงุถุบุท ุนูู **"ุชุณุฌูู ุฑุตูุฏ ุจุฏุงูุฉ ุงูููู"**
4. ุฃุฏุฎู ุงูุฑุตูุฏ ุงููุนูู ูู ุงูุฏุฑุฌ
5. ุงุญูุธ

### ุงูุฎุทูุฉ 2: ุชุณุฌูู ุฑุตูุฏ ููุงูุฉ ุงูููู
1. ูู ููุงูุฉ ุงููููุ ุนุฏ ุฅูู **ุงููุตุฑููุงุช โ ุงูุฏุฑุฌ**
2. ุงุถุบุท ุนูู **"ุชุณุฌูู ุฑุตูุฏ ููุงูุฉ ุงูููู"**
3. ุฃุฏุฎู ุงูุฑุตูุฏ ุงูููุงุฆู ูู ุงูุฏุฑุฌ
4. ุงุญูุธ

### ุงูุฎุทูุฉ 3: ุชุญุฏูุซ ุงูุดุงุดุฉ ุงูุฑุฆูุณูุฉ
- โ **ุชููุงุฆููุง** ุณูุชู ุชุญุฏูุซ ุงูููุฎุต ุงููุงูู
- โ ุณุชุธูุฑ ููู **ุงูุฏุฎู ุงููููู**
- โ ุณุชุธูุฑ ููู **ุงููุตุฑููุงุช**
- โ ุณูุชู ุญุณุงุจ **ุตุงูู ุงูุฑุจุญ**

---

## ๐ ููู ุงููุนุงุฏูุฉ

### ูุซุงู ุนููู:

#### ุงูุจูุงูุงุช:
- ุฑุตูุฏ ุจุฏุงูุฉ ุงูููู: **10,000 ุฏ.ุฌ**
- ุฑุตูุฏ ููุงูุฉ ุงูููู: **15,000 ุฏ.ุฌ**
- ูุตุฑููุงุช ูู ุงูุฏุฑุฌ: **500 ุฏ.ุฌ** (ูุซูุงู: ุดุฑุงุก ููุงุฏุ ุจูุฒููุ ุฅูุฎ)
- ุฏุฎู ูุฏูู ูุณุฌู: **1,000 ุฏ.ุฌ** (ูุซูุงู: ุจูุน ูุฏููุ ุงุณุชูุงู ุฏูู)
- ูุตุฑููุงุช ุงูููู: **800 ุฏ.ุฌ**

#### ุงูุญุณุงุจุงุช:
```
ุฏูุฑุงู ุงูุฏุฑุฌ = (15,000 - 10,000) + 500 = 5,500 ุฏ.ุฌ
ุฅุฌูุงูู ุงูุฏุฎู = 5,500 + 1,000 = 6,500 ุฏ.ุฌ
ุฑุจุญ ุงูููู (20%) = 6,500 ร 0.20 = 1,300 ุฏ.ุฌ
ุตุงูู ุงูุฑุจุญ = 1,300 - 800 = 500 ุฏ.ุฌ
```

---

## ๐ฏ ุงููุชูุฌุฉ ุงููุชููุนุฉ

ุจุนุฏ ุชุณุฌูู ุจูุงูุงุช ุงูุฏุฑุฌุ ุณุชุธูุฑ ุงูุดุงุดุฉ ุงูุฑุฆูุณูุฉ:

โ **ุงูุฑุตูุฏ ุงูููุฏู ุงูุฅุฌูุงูู:** [ุงููุญููุธ]  
โ **ูุตุฑููุงุช ุงูููู:** [ุงููุฌููุน ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช]  
โ **ุฏุฎู ุงูููู:** [ูุญุณูุจ ูู ุงูุฏุฑุฌ + ุงูุฏุฎู ุงููุฏูู]  
โ **ุตุงูู ุฑุจุญ ุงูููู:** [ุฑุจุญ ุงูููู - ูุตุฑููุงุช ุงูููู]

---

## ๐ง ุงูุชุญุณููุงุช ุงููุทุจูุฉ

### 1. ุฑุณุงูุฉ ุชูุถูุญูุฉ ูู ุงูุดุงุดุฉ ุงูุฑุฆูุณูุฉ
ุนูุฏ ุนุฏู ุชุณุฌูู ุฑุตูุฏ ุจุฏุงูุฉ ุงููููุ ุณุชุธูุฑ ุฑุณุงูุฉ ุจุฑุชูุงููุฉ:

```
โ๏ธ ูู ูุชู ุชุณุฌูู ุฑุตูุฏ ุจุฏุงูุฉ ุงูููู

ูุนุฑุถ ุงูููุฎุต ุงููุงูู ุงููุงูู (ุงูุฏุฎู ูุงููุตุฑููุงุช ูุตุงูู ุงูุฑุจุญ)ุ 
ูุฌุจ ุชุณุฌูู ุฑุตูุฏ ุงูุฏุฑุฌ ูู ูุณู ุงููุตุฑููุงุช โ ุชุจููุจ "ุงูุฏุฑุฌ".

โ ุงุฐูุจ ุฅูู: ุงููุตุฑููุงุช โ ุงูุฏุฑุฌ โ ุณุฌู ุจุฏุงูุฉ/ููุงูุฉ ุงูููู
```

### 2. ูุนูููุงุช Debug ูุญุณููุฉ
ูู ุงูู console (ุนูุฏ ุชุดุบูู ุงูุชุทุจูู ูู VS Code/Android Studio):

```
[FINANCE] โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
[FINANCE] Final income calculation:
[FINANCE] Calculated turnover: 5500.0
[FINANCE] Manual incomes count: 1
[FINANCE] Manual incomes total: 1000.0
[FINANCE] Total income: 6500.0
[FINANCE] Expenses count: 3
[FINANCE] Total expenses: 800.0
[FINANCE] Gross profit (20%): 1300.0
[FINANCE] Net profit: 500.0
[FINANCE] โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

### 3. ุฅุนุงุฏุฉ ุชุญููู ุงูุฑุตูุฏ ุงูููุฏู
ุชู ุฅุถุงูุฉ ุฅุนุงุฏุฉ ุชุญููู `totalCashBalance` ูู ูู ูุฑุฉ ูุชู ูููุง ุฌูุจ ุงูุจูุงูุงุช ุงููุงููุฉ:

```dart
// Reload total cash balance from database
final savedBalance = await dbHelper.getSetting('totalCashBalance');
_totalCashBalance = double.tryParse(savedBalance ?? '0.0') ?? 0.0;
```

ูุฐุง ูุถูู ุฃู ุงูุฑุตูุฏ ูุญุฏุซ ุฏุงุฆููุง ุญุชู ูู ุชู ุชุนุฏููู ูู ููุงู ุขุฎุฑ.

---

## โ๏ธ ููุงุญุธุงุช ูููุฉ

### 1. ููุงุฐุง ูุง ููุญุชุณุจ ุงูุฑุตูุฏ ุงูููุฏู ุงูุฅุฌูุงููุ
**ุงูุฑุตูุฏ ุงูููุฏู ุงูุฅุฌูุงูู** ูู ุฑุตูุฏ ุชุฑุงููู ููุฐ ุจุฏุงูุฉ ุงูุนููุ ูุดูู:
- ุฌููุน ุงููุจุงูุบ ุงูููุฏูุฉ ูู ุงูุฏุฑุฌ ูุงูุจูู
- ุฌููุน ุงูููุฏูุงุช ุงููุชููุฑุฉ ูู ุงูุนูู

**ุงูุฏุฎู ุงููููู** ูู:
- ูุง ุฏุฎู ุงูููู ููุท (ุงููุฑู ุจูู ุจุฏุงูุฉ ูููุงูุฉ ุงูููู)
- ูุญุณุงุจ ุตุงูู ุงูุฑุจุญ ุงููููู

**ูุฐููุ ููุง ูููุชุงู ูุฎุชููุชุงู:**
- ุงูุฑุตูุฏ ุงูููุฏู = **ุงููุฌููุน ุงูููู**
- ุงูุฏุฎู ุงููููู = **ูุง ุฏุฎู ุงูููู ููุท**

### 2. ูุงุฐุง ูู ูู ุฃุณุฌู ุจุฏุงูุฉ ุงููููุ
ุงููุธุงู ูุฏุนู **ุงูุญุณุงุจุงุช ุงููุชูุงุทุนุฉ** (Cross-Date Calculation):
- ุฅุฐุง ูู ุชุณุฌู ุจุฏุงูุฉ ุงููููุ ุณูุณุชุฎุฏู ุขุฎุฑ ุฑุตูุฏ ุจุฏุงูุฉ ูุจู ุขุฎุฑ ุฅุบูุงู
- ุฅุฐุง ูู ุชุณุฌู ููุงูุฉ ุงููููุ ุณูุจุญุซ ุนู ุฃูู ููุงูุฉ ุจุนุฏ ุงูุจุฏุงูุฉ

**ููู ูุฃูุถู ุฏูุฉ:**
โ ุณุฌู ุจุฏุงูุฉ ูููุงูุฉ ูู ููู

### 3. ูู ูููููู ุชุณุฌูู ุงูุฏุฎู ูุฏูููุง ููุทุ
ูุนู! ุฅุฐุง ูุงู ูุฏูู **ุฏุฎู ูุง ููุฑ ุนุจุฑ ุงูุฏุฑุฌ**:
1. ุงุฐูุจ ุฅูู **ุงููุตุฑููุงุช โ ุชุจููุจ "ุงูุฏุฎู"**
2. ุงุถุบุท ุนูู ุฒุฑ **+** (ุฅุถุงูุฉ ุฏุฎู)
3. ุฃุฏุฎู ุงููุจูุบ ูุงููุตุฏุฑ ูุงูููุงุญุธุงุช
4. ุงุญูุธ

ุณููุญุชุณุจ ูุฐุง ุงูุฏุฎู ูู **ุฅุฌูุงูู ุงูุฏุฎู ุงููููู**.

---

## ๐งช ุงุฎุชุจุงุฑ ุงูุญู

### ุณููุงุฑูู 1: ููู ุนุงุฏู
1. โ ุณุฌู ุฑุตูุฏ ุจุฏุงูุฉ ุงูููู: **10,000 ุฏ.ุฌ**
2. โ ุณุฌู ุจุนุถ ุงููุตุฑููุงุช (ูุซูุงู: 500 ุฏ.ุฌ)
3. โ ุณุฌู ุฑุตูุฏ ููุงูุฉ ุงูููู: **15,000 ุฏ.ุฌ**
4. โ ุงููุชูุฌุฉ:
   - **ุงูุฏุฎู:** 5,500 ุฏ.ุฌ
   - **ุงููุตุฑููุงุช:** 500 ุฏ.ุฌ
   - **ุตุงูู ุงูุฑุจุญ:** 600 ุฏ.ุฌ

### ุณููุงุฑูู 2: ุฏุฎู ูุฏูู ุฅุถุงูู
1. โ ุณุฌู ุฑุตูุฏ ุจุฏุงูุฉ ุงูููู: **5,000 ุฏ.ุฌ**
2. โ ุณุฌู ุฏุฎู ูุฏูู: **2,000 ุฏ.ุฌ** (ุงุณุชูุงู ุฏูู)
3. โ ุณุฌู ุฑุตูุฏ ููุงูุฉ ุงูููู: **8,000 ุฏ.ุฌ**
4. โ ุงููุชูุฌุฉ:
   - **ุงูุฏุฎู:** (8,000 - 5,000) + 2,000 = **5,000 ุฏ.ุฌ**

### ุณููุงุฑูู 3: ูุง ุชูุฌุฏ ุจูุงูุงุช ุฏุฑุฌ
1. โ ูู ุชุณุฌู ุจุฏุงูุฉ/ููุงูุฉ ุงูููู
2. โ ุงููุชูุฌุฉ:
   - ุฑุณุงูุฉ ุจุฑุชูุงููุฉ ุชุธูุฑ: **"ูู ูุชู ุชุณุฌูู ุฑุตูุฏ ุจุฏุงูุฉ ุงูููู"**
   - **ุงูุฏุฎู:** 0 (ุฃู ููุท ุงูุฏุฎู ุงููุฏูู ุฅู ููุฌุฏ)
   - **ุงูููุฎุต:** ุบูุฑ ูุงูู

---

## ๐ ุงูุฎูุงุตุฉ

| ุงููุดููุฉ | ุงูุณุจุจ | ุงูุญู |
|---------|-------|------|
| ุงูุฏุฎู = 0 | ูุง ุชูุฌุฏ ุจูุงูุงุช ุฏุฑุฌ | ุณุฌู ุฑุตูุฏ ุจุฏุงูุฉ/ููุงูุฉ ุงูููู |
| ุงููุตุฑููุงุช = 0 | ูุง ุชูุฌุฏ ูุตุฑููุงุช ูุณุฌูุฉ | ุณุฌู ุงููุตุฑููุงุช ูู ุดุงุดุฉ ุงููุตุฑููุงุช |
| ุตุงูู ุงูุฑุจุญ = 0 | ูุง ุฏุฎู ููุง ูุตุฑููุงุช | ุณุฌู ุจูุงูุงุช ุงูุฏุฑุฌ ุฃููุงู |
| ุงูุฑุตูุฏ ุงูููุฏู = 0 | ูู ูุชู ุชุนูููู | ุนุฏูู ุงูุฑุตูุฏ ูู ุงูุจุทุงูุฉ ุงูุฃููู |

---

**ุงูุญุงูุฉ:** โ **ุฌุงูุฒ ููุงุณุชุฎุฏุงู**

**ููุงุญุธุฉ:** ูุฐุง ุงูุชุตููู **ุตุญูุญ ูุญุงุณุจููุง** ููุชุทูุจ ูู ุงููุณุชุฎุฏู ุชุณุฌูู ุจูุงูุงุช ุงูุฏุฑุฌ ุจุงูุชุธุงู ููุญุตูู ุนูู ููุฎุต ูุงูู ุฏููู.
